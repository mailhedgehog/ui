import{d as L,b as V,i as O,L as P,N as U,u as G,l as $,m as J,p as K,o as s,c as o,a as t,v as c,t as n,k as e,n as j,q as C,s as b,g as A,F as p,f as v,P as Q,O as W,j as X,x as m}from"./index.7c1e58c1.js";import{u as Y,a as Z,b as ee,c as te,d as se,r as oe,e as ae,f as ne}from"./email-attachments.1155fe0d.js";import{_ as ie,a as re,c as le}from"./Copyright.vue_vue_type_script_setup_true_lang.d5a6ddab.js";import{_ as de,F as ce}from"./FooterRightContent.7dd9ca24.js";import{r as xe}from"./EyeIcon.eeeccff0.js";import{r as E}from"./ExclamationTriangleIcon.f34bb792.js";import"./keyboard.fb260a87.js";const me={class:"min-h-screen flex flex-col bg-context-50 dark:bg-context-900"},ue={class:"flex justify-between items-center py-4 px-4 sm:px-6 lg:px-8 relative shadow dark:shadow-context-500"},_e={class:"inline-flex sm:space-x-3 z-10"},he={key:0,class:"flex-grow p-8 flex justify-center items-center"},pe={class:"flex flex-col items-center space-y-6"},ve=t("div",{class:"font-semibold text-4xl text-primary-600"}," 404 ",-1),fe={class:"text-context-900 dark:text-context-100 text-lg"},ye={class:"px-4 sm:px-6 lg:px-8"},ke={class:"overflow-hidden bg-context-50 dark:bg-context-900 border border-context-300 shadow dark:shadow-context-500 sm:rounded-lg mb-6 lg:mx-auto lg:max-w-6xl"},be={class:"px-4 py-5 sm:px-6"},we={class:"text-lg font-medium leading-6 text-context-900 dark:text-context-100 flex justify-between"},ge={class:"mt-1 max-w-2xl text-sm text-context-500 dark:text-context-400"},$e={class:"border-t border-context-200 px-4 py-5 sm:p-0"},je={class:"sm:divide-y sm:divide-context-200 sm:dark:divide-context-300"},Ce={class:"text-sm font-medium text-context-500 dark:text-context-400"},Ee={class:"mt-1 text-sm text-context-900 dark:text-context-100 sm:col-span-2 sm:mt-0"},Se={key:0},He={key:1,role:"list",class:"divide-y divide-context-200 dark:divide-context-200 rounded-md border border-context-200 dark:border-context-200"},Te={class:"flex items-center lg:mx-auto lg:max-w-6xl border-b-0 sm:border-b border-context-200 dark:border-context-400"},Fe={class:"flex-grow"},Be={class:"sm:hidden"},Me=["value","selected"],Re={class:"hidden sm:block"},Ae={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Ne=["aria-current","onClick"],qe={class:"pl-4"},ze={class:"hidden md:inline"},De={key:0,class:"lg:mx-auto lg:max-w-6xl"},Ie={key:0,class:"py-6"},Le=["height","srcdoc"],Ve={key:1,class:"flex justify-center items-center"},Oe={class:"ml-4 text-context-900 dark:text-context-100"},Pe={key:1,class:"py-6"},Ue={key:0,class:"text-context-900 dark:text-context-100"},Ge={class:"overflow-auto"},Je={key:1,class:"flex justify-center items-center"},Ke={class:"ml-4 text-context-900 dark:text-context-100"},Qe={key:2,class:"py-6"},We={class:"text-context-900 dark:text-context-100"},Xe={class:"overflow-auto"},Ye={key:3,class:"py-6"},Ze={key:0},et={role:"list",class:"divide-y divide-context-200 rounded-md border border-context-200"},tt={class:"flex w-0 flex-1 items-center"},st={class:"ml-2 w-0 flex-1 text-context-900 dark:text-context-100 truncate"},ot={key:0,class:"ml-2"},at={class:"ml-4 flex-shrink-0"},nt=["onClick"],it={class:"hidden md:inline"},rt={key:1,class:"flex justify-center items-center"},lt={class:"ml-4 text-context-900 dark:text-context-100"},dt={class:"py-4 px-4 sm:px-6 flex justify-between items-center shadow dark:shadow-context-500 text-context-900 dark:text-context-100"},yt=L({__name:"SharedMail",setup(ct){const{t:r}=V(),w=O("MailHedgehog");P();const S=U();G();const g=$(!1),H=$(!1),i=$(null),{isAllHeaders:f,headers:N}=Y(i),{currentTab:l,tabs:T}=Z(),{iframeHeight:q,resizeIframe:F}=ee(),{downloadEmailAttachment:z,downloadEmail:D}=te(i,{urlBuilder:(y,d)=>`shared-email/${S.params.id}/attachment/${y}`}),I=y=>{g.value=!0,w==null||w.request().get(`shared-email/${y}`).then(d=>{var u,_;(u=d.data)!=null&&u.data?i.value=(_=d.data)==null?void 0:_.data:i.value=null}).catch(()=>{H.value=!0}).finally(()=>{g.value=!1})};return J(()=>{I(S.params.id)}),(y,d)=>{var _,B,M;const u=K("tooltip");return s(),o("div",me,[t("div",ue,[c(de,{class:""}),t("div",_e,[c(ie),c(re)])]),H.value?(s(),o("div",he,[t("div",pe,[ve,t("div",fe,n(e(r)("sharedEmail.notFound")),1)])])):(s(),o("div",{key:1,class:j(["flex-grow flex flex-col py-8",{"pointer-events-none opacity-75":g.value}])},[t("div",ye,[t("div",ke,[t("div",be,[t("h3",we,[t("div",null,n(e(r)("email.headersTitle")),1),t("div",null,[C((s(),o("a",{class:"cursor-pointer",onClick:d[0]||(d[0]=b(a=>f.value=!e(f),["prevent"]))},[e(f)?(s(),A(e(se),{key:0,class:"text-primary-400 h-5 w-5"})):(s(),A(e(xe),{key:1,class:"text-primary-700 h-5 w-5"}))])),[[u,e(f)?e(r)("email.hintHideHeaders"):e(r)("email.hintShowHeaders")]])])]),t("p",ge,n(e(r)("email.headersSubtitle")),1)]),t("div",$e,[t("dl",je,[(s(!0),o(p,null,v(e(N),(a,x)=>(s(),o("div",{key:x,class:"py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5 sm:px-6"},[t("dt",Ce,n(x),1),t("dd",Ee,[a.length===1?(s(),o("div",Se,n(a[0]),1)):(s(),o("ul",He,[(s(!0),o(p,null,v(a,(h,k)=>(s(),o("li",{key:k,class:"py-3 pl-3 pr-4 text-sm"},n(h),1))),128))]))])]))),128))])])]),t("div",Te,[t("div",Fe,[t("div",Be,[C(t("select",{id:"tabs","onUpdate:modelValue":d[1]||(d[1]=a=>W(l)?l.value=a:null),name:"tabs",class:"block w-full rounded border-context-300 dark:border-context-600 py-2 pl-3 pr-10 text-base focus:border-primary-500 focus:primary-none focus:ring-primary-500 sm:text-sm"},[(s(!0),o(p,null,v(e(T),a=>(s(),o("option",{key:a.id,value:a.id,selected:e(l)==a.id},n(e(r)(`email.tab.${a.id}`)),9,Me))),128))],512),[[Q,e(l)]])]),t("div",Re,[t("nav",Ae,[(s(!0),o(p,null,v(e(T),a=>{var x,h,k,R;return s(),o("a",{key:a.id,href:"#",class:j(["whitespace-nowrap flex py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-500",[e(l)===a.id?"border-primary-500 text-primary-600":"cursor-pointer border-transparent text-context-500 dark:text-context-400 hover:text-context-700 hover:dark:text-context-300 hover:border-context-200 hover:dark:border-context-400"]]),"aria-current":e(l)===a.id?"page":void 0,onClick:b(xt=>l.value=a.id,["prevent"])},[X(n(e(r)(`email.tab.${a.id}`))+" ",1),a.id==="attachments"&&((h=(x=i.value)==null?void 0:x.attachments)==null?void 0:h.length)!==void 0?(s(),o("span",{key:0,class:j(["inline-block ml-3 py-0.5 px-2.5 rounded-full text-xs font-medium transition-colors duration-500",[e(l)===a.id?"bg-primary-100 text-primary-600":"bg-context-200 dark:bg-context-700 text-context-900 dark:text-context-100"]])},n((R=(k=i.value)==null?void 0:k.attachments)==null?void 0:R.length),3)):m("",!0)],10,Ne)}),128))])])]),t("div",qe,[C((s(),o("button",{type:"button",class:"btn btn--default rounded",onClick:d[2]||(d[2]=b(a=>e(D)(),["prevent"]))},[c(e(oe),{class:"md:mr-2 h-5 w-5"}),t("span",ze,n(e(r)("email.download")),1)])),[[u,e(r)("email.downloadHint")]])])]),i.value?(s(),o("div",De,[e(l)==="html"?(s(),o("div",Ie,[i.value.html?(s(),o("iframe",{key:0,id:"preview-html",height:e(q),srcdoc:i.value.html,class:"w-full border border-context-200 dark:border-context-400",onLoad:d[3]||(d[3]=(...a)=>e(F)&&e(F)(...a))},null,40,Le)):(s(),o("div",Ve,[c(e(E),{class:"text-primary-500 h-8 w-8"}),t("div",Oe,n(e(r)("email.htmlEmpty")),1)]))])):m("",!0),e(l)==="plain"?(s(),o("div",Pe,[i.value.plain?(s(),o("div",Ue,[t("pre",Ge,n(i.value.plain),1)])):(s(),o("div",Je,[c(e(E),{class:"text-primary-500 h-8 w-8"}),t("div",Ke,n(e(r)("email.plainEmpty")),1)]))])):m("",!0),e(l)==="source"?(s(),o("div",Qe,[t("div",We,[t("pre",Xe,n(i.value.source),1)])])):m("",!0),e(l)==="attachments"?(s(),o("div",Ye,[((B=(_=i.value)==null?void 0:_.attachments)==null?void 0:B.length)>0?(s(),o("div",Ze,[t("ul",et,[(s(!0),o(p,null,v((M=i.value)==null?void 0:M.attachments,(a,x)=>(s(),o("li",{key:x,class:"flex items-center justify-between py-3 pl-3 pr-4 text-sm"},[t("div",tt,[c(e(ae),{class:"text-context-400 dark:text-context-500 flex-shrink-0 h-5 w-5"}),t("span",st,[t("span",null,n(a.filename),1),a.contentType?(s(),o("span",ot," ("+n(a.contentType)+") ",1)):m("",!0)])]),t("div",at,[t("a",{class:"cursor-pointer font-medium text-primary-500 hover:text-primary-600 transition-colors duration-500",onClick:b(h=>e(z)(a),["prevent"])},[c(e(ne),{class:"md:hidden flex-shrink-0 h-5 w-5"}),t("span",it,n(e(r)("email.download")),1)],8,nt)])]))),128))])])):(s(),o("div",rt,[c(e(E),{class:"text-primary-500 h-8 w-8"}),t("div",lt,n(e(r)("email.noAttachments")),1)]))])):m("",!0)])):m("",!0)])],2)),t("div",dt,[c(le),c(ce)])])}}});export{yt as default};
