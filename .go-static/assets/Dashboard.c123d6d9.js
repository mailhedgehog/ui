import{o as l,c as m,a as t,d as g,u as C,b as k,i as b,e as y,r as B,F as A,f as Z,g as h,w as i,n as V,h as L,j as T,t as v,k as s,l as $,m as U,p as F,q,s as I,v as o,T as R,x as j}from"./index.7c1e58c1.js";import{g as W,S as Y,b as E,I as G,_ as J,a as P,c as X}from"./Copyright.vue_vue_type_script_setup_true_lang.d5a6ddab.js";import{_ as D,F as K}from"./FooterRightContent.7dd9ca24.js";import{_ as z,h as w,Y as N,z as Q,S as O}from"./transition.c8b00211.js";import{r as H}from"./ExclamationTriangleIcon.f34bb792.js";import"./keyboard.fb260a87.js";function ee(u,e){return l(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12H12m-8.25 5.25h16.5"})])}function te(u,e){return l(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function se(u,e){return l(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 3.75H6.912a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H15M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859M12 3v8.25m0 0-3-3m3 3 3-3"})])}function oe(u,e){return l(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3 3 8.735 8.735m0 0a.374.374 0 1 1 .53.53m-.53-.53.53.53m0 0L21 21M14.652 9.348a3.75 3.75 0 0 1 0 5.304m2.121-7.425a6.75 6.75 0 0 1 0 9.546m2.121-11.667c3.808 3.807 3.808 9.98 0 13.788m-9.546-4.242a3.733 3.733 0 0 1-1.06-2.122m-1.061 4.243a6.75 6.75 0 0 1-1.625-6.929m-.496 9.05c-3.068-3.067-3.664-7.67-1.79-11.334M12 12h.008v.008H12V12Z"})])}function ne(u,e){return l(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}function ae(u,e){return l(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function re(u,e){return l(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function le(u,e){return l(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const ie={class:"mt-5 flex-shrink-0 divide-y divide-primary-800 overflow-y-auto","aria-label":"Sidebar"},ce={class:"space-y-1 px-2"},de=["href","aria-current","onClick"],S=g({__name:"AppNavigation",setup(u){const e=C(),{t:a}=k();b("MailHedgehog");const r=y(()=>{var c;const n=(c=e.getters.getUser)==null?void 0:c.permissions;return Array.isArray(n)?n.includes("manage_users"):!1}),p=y(()=>{const n=[{name:"inbox",href:"/",icon:se}];return r.value&&n.push({name:"users",href:"/users",icon:re}),n});return(n,c)=>{const x=B("router-link");return l(),m("nav",ie,[t("div",ce,[(l(!0),m(A,null,Z(p.value,d=>(l(),h(x,{key:d.name,custom:"",to:d.href},{default:i(({href:_,navigate:f,isActive:Ue,isExactActive:M})=>[t("a",{href:_,class:V([M?"bg-primary-800 text-context-50":"text-primary-100 hover:text-context-50 hover:bg-primary-600","group flex items-center px-2 py-2 text-sm leading-6 font-medium rounded-md"]),"aria-current":M?"page":void 0,onClick:f},[(l(),h(L(d.icon),{class:"mr-4 h-6 w-6 flex-shrink-0 text-primary-200","aria-hidden":"true"})),T(" "+v(s(a)(`menu.${d.name}`)),1)],10,de)]),_:2},1032,["to"]))),128))])])}}}),ue=["disabled"],fe=g({__name:"WebsocketConnector",setup(u){const e=b("MailHedgehog"),a=$(!1),r=$(null),p=()=>{a.value=!0,r.value&&r.value.close(),r.value=null,a.value=!1},n=d=>{switch(d.type){case"new_message":e==null||e.$emit("new_message",d.data),e==null||e.info("Message received");break;default:e==null||e.error(`Online system flow type ${d.type} not supported`)}},c=()=>{if(r.value)return;a.value=!0;let d=e==null?void 0:e.configValue("http.baseUrl","").trim().replace(/\/+$/,"").replace(/(http)(s)?\:\/\//,"ws$2://");d.startsWith("//")&&(d=`ws:${d}`),r.value=new WebSocket(`${d}/websocket`),r.value.onopen=()=>{},r.value.onclose=()=>{p()},r.value.onerror=()=>{e==null||e.error("Online connection error")},r.value.onmessage=_=>{try{const f=JSON.parse(_.data);switch(f.flow){case"system":n(f);break;default:e==null||e.error(`Online message flow ${f.flow} not supported`)}}catch(f){console.error(f),console.error(_.data)}},a.value=!1},x=()=>{r.value?p():c()};return U(()=>{c()}),(d,_)=>{const f=F("tooltip");return q((l(),m("button",{class:"cursor-pointer text-context-400 dark:text-context-600 flex items-center justify-center font-medium uppercase",disabled:a.value,onClick:I(x,["prevent"])},[r.value?(l(),h(s(ne),{key:0,class:"h-6 w-6","aria-hidden":"true"})):(l(),h(s(oe),{key:1,class:"h-6 w-6","aria-hidden":"true"}))],8,ue)),[[f,r.value?"Online":"Offline"]])}}}),me=g({__name:"ProfileDropdown",setup(u){const e=b("MailHedgehog"),{t:a}=k(),r=()=>{e==null||e.request().post("logout").finally(()=>{e==null||e.setAuthToken();const p=()=>{let c=e==null?void 0:e.configValue("http.baseUrl","").trim().replace(/\/+$/,"");c=`${c}/`,window.open(c,"_self")},n=new XMLHttpRequest;n.open("GET","./mh-configuration.json",!1,"logout","logout"),n.onload=()=>{n.readyState===4&&p()},n.onerror=()=>p(),n.send(null)})};return(p,n)=>(l(),h(s(G),{as:"div",class:"icon-select"},{default:i(()=>[t("div",null,[o(s(W),{class:"icon-select__menu-btn flex max-w-xs items-center rounded-full text-sm focus:outline-none lg:rounded-md lg:p-2"},{default:i(()=>[o(s(ae),{class:"w-8 h-8"}),o(s(te),{class:"ml-1 h-5 w-5 flex-shrink-0 text-context-400 dark:text-context-600","aria-hidden":"true"})]),_:1})]),o(R,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:i(()=>[o(s(Y),{class:"icon-select__menu w-48"},{default:i(()=>[o(s(E),null,{default:i(({active:c})=>[t("a",{class:V([[c?"icon-select__menu-item--active":""],"icon-select__menu-item"]),onClick:r},v(s(a)("menu.logout")),3)]),_:1})]),_:1})]),_:1})]),_:1}))}}),pe=t("div",{class:"fixed inset-0 bg-context-500 dark:bg-context-900 bg-opacity-75 dark:bg-opacity-75 transition-opacity"},null,-1),xe={class:"fixed inset-0 z-10 overflow-y-auto"},_e={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},ve={class:"sm:flex sm:items-start"},he={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-primary-100 sm:mx-0 sm:h-10 sm:w-10"},we={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},ge={class:"mt-2"},ye={class:"text-sm text-context-500 dark:text-context-400"},ke={class:"mt-5 sm:mt-4 sm:flex justify-end"},be=g({__name:"Dialog",setup(u){const{t:e}=k(),a=C(),r=y(()=>a.getters["confirmDialog/show"]);return(p,n)=>(l(),h(s(O),{as:"template",show:r.value},{default:i(()=>[o(s(z),{as:"div",class:"relative z-10",onClose:n[2]||(n[2]=c=>s(a).dispatch("confirmDialog/decline"))},{default:i(()=>[o(s(w),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[pe]),_:1}),t("div",xe,[t("div",_e,[o(s(w),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:i(()=>[o(s(N),{class:"relative transform overflow-hidden rounded-lg px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 w-full sm:max-w-lg sm:p-6 bg-context-50 dark:bg-context-900"},{default:i(()=>[t("div",ve,[t("div",he,[o(s(H),{class:"h-6 w-6 text-primary-600","aria-hidden":"true"})]),t("div",we,[o(s(Q),{as:"h3",class:"text-lg font-medium leading-6 text-context-900 dark:text-context-50"},{default:i(()=>[T(v(s(a).getters["confirmDialog/modalTitle"]||s(e)("confirmDialog.modalTitle")),1)]),_:1}),t("div",ge,[t("p",ye,v(s(a).getters["confirmDialog/modalText"]||s(e)("confirmDialog.modalText")),1)])])]),t("div",ke,[t("button",{ref:"cancelButtonRef",type:"button",class:"btn btn--default w-full sm:w-36 justify-center mb-4 sm:mb-0 sm:mr-4",onClick:n[0]||(n[0]=c=>s(a).dispatch("confirmDialog/decline"))},v(s(a).getters["confirmDialog/btnCancel"]||s(e)("confirmDialog.btnCancel")),513),t("button",{type:"button",class:"btn btn--primary w-full sm:w-36 justify-center",onClick:n[1]||(n[1]=c=>s(a).dispatch("confirmDialog/accept"))},v(s(a).getters["confirmDialog/btnAccept"]||s(e)("confirmDialog.btnAccept")),1)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}}),$e=t("div",{class:"fixed inset-0 bg-context-600 bg-opacity-75"},null,-1),Ce={class:"fixed inset-0 z-40 flex"},Me={class:"absolute top-0 right-0 -mr-12 pt-2"},je={class:"sr-only"},De=t("div",{class:"w-14 flex-shrink-0","aria-hidden":"true"},null,-1),Se={class:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col"},Be={class:"flex flex-grow flex-col overflow-y-auto bg-primary-700 pt-5 pb-4"},Ae={class:"min-h-screen flex flex-1 flex-col lg:pl-64 bg-context-100 dark:bg-context-900"},Ve={class:"flex h-16 flex-shrink-0 border-b border-context-200 dark:border-context-700 bg-context-50 dark:bg-context-900 lg:border-none z-10 shadow dark:shadow-context-500"},Te={class:"sr-only"},ze={class:"flex flex-1 justify-between px-4 sm:px-6 lg:mx-auto lg:max-w-6xl lg:px-8"},Ne=t("div",{id:"header-search",class:"flex flex-1"},null,-1),Oe={class:"ml-4 flex items-center md:ml-6 space-x-3"},Ze={class:"flex-grow flex-1 pb-8 overflow-hidden"},Le={class:"py-4 px-4 sm:px-6 flex justify-between items-center shadow dark:shadow-context-500 text-context-900 dark:text-context-100"},Ee=g({__name:"Dashboard",setup(u){const{t:e}=k(),a=b("MailHedgehog"),r=C(),p=y(()=>r.getters.getUser),n=$(!1);return(c,x)=>{var _;const d=B("router-view");return l(),m(A,null,[o(s(O),{as:"template",show:n.value},{default:i(()=>[o(s(z),{as:"div",class:"relative z-40 lg:hidden",onClose:x[1]||(x[1]=f=>n.value=!1)},{default:i(()=>[o(s(w),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[$e]),_:1}),t("div",Ce,[o(s(w),{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:i(()=>[o(s(N),{class:"relative flex w-full max-w-xs flex-1 flex-col bg-primary-700 pt-5 pb-4"},{default:i(()=>[o(s(w),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[t("div",Me,[t("button",{type:"button",class:"ml-1 flex h-10 w-10 items-center justify-center rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-context-50 focus:dark:ring-context-900",onClick:x[0]||(x[0]=f=>n.value=!1)},[t("span",je,v(s(e)("sidebar.close")),1),o(s(le),{class:"h-6 w-6 text-context-50","aria-hidden":"true"})])])]),_:1}),o(D,{class:"px-4","reverse-color":!1}),o(S)]),_:1})]),_:1}),De])]),_:1})]),_:1},8,["show"]),t("div",Se,[t("div",Be,[o(D,{class:"px-4","reverse-color":!1}),o(S)])]),t("div",Ae,[t("div",Ve,[t("button",{type:"button",class:"border-r border-context-200 dark:border-context-700 px-4 text-context-400 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 lg:hidden",onClick:x[2]||(x[2]=f=>n.value=!0)},[t("span",Te,v(s(e)("sidebar.open")),1),o(s(ee),{class:"h-6 w-6","aria-hidden":"true"})]),t("div",ze,[Ne,t("div",Oe,[(_=s(a))!=null&&_.configValue("http.websocket",!1)?(l(),h(fe,{key:0})):j("",!0),o(J),o(P),p.value?(l(),h(me,{key:1})):j("",!0)])])]),t("main",Ze,[o(d)]),t("div",Le,[o(X),o(K)])]),o(be)],64)}}});export{Ee as default};
